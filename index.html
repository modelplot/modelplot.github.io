<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <title>introduction to modelplotr/py</title>

    <meta charset="utf-8" />
    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="introduction to modelplotr/py Full Atom Feed" />
    <link rel="stylesheet" href="/theme/css/poole.css"/>
    <link rel="stylesheet" href="/theme/css/syntax.css"/>
    <link rel="stylesheet" href="/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="/theme/css/styles.css"/>
  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="/theme/img/profile.png"/>
    </div>
  </div>

  <nav class="sidebar-nav">
  <a class="sidebar-nav-item" href="/">All</a>

      <a class="sidebar-nav-item" href="/category/misc.html">misc</a>
      <a class="sidebar-nav-item" href="/category/posts.html">posts</a>

  <a class="sidebar-nav-item" href="http://getpelican.com/">Pelican</a>
  <a class="sidebar-nav-item" href="http://python.org/">Python.org</a>
  <a class="sidebar-nav-item" href="http://jinja.pocoo.org/">Jinja2</a>
  <a class="sidebar-nav-item" href="#">You can modify those links in your config file</a>
  </nav>

  <div class="sidebar-item">
    <p>
    <a href="https://twitter.com/">&copy; @</a> 2017
    </p>
    <p class="tiny-note">
      <a class="muted" href="https://github.com/thomaswilley/pelicanyan">pelicanyan v0.1</a>
    </p>
  </div>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">introduction to modelplotr/py</a>
            <small>sample blog</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="content-title">
</div>
<div class="posts">
  <div class="post">
    <h1 class="post-title">
      <a href="/modelplot-python.html" rel="bookmark" title="Permalink to Evaluation plots for predictiveÂ models">Evaluation plots for predictive&nbsp;models</a>
    </h1>
    <span class="post-date">juli 27, 2018</span>

    <style type="text/css">/*!
*
* IPython notebook
*
*/
/* <span class="caps">CSS</span> font colors for translated <span class="caps">ANSI</span> colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #<span class="caps">90CAF9</span>;
  border-left-color: #<span class="caps">E3F2FD</span>;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #<span class="caps">E3F2FD</span>;
  border-right-width: 1px;
  background: #<span class="caps">E3F2FD</span>;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #<span class="caps">42A5F5</span> -40px, #<span class="caps">42A5F5</span> 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #<span class="caps">42A5F5</span> -40px, #<span class="caps">42A5F5</span> 7px, #<span class="caps">E3F2FD</span> 7px, #<span class="caps">E3F2FD</span> 100%);
}
.edit_mode div.cell.selected {
  border-color: #<span class="caps">66BB6A</span>;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #<span class="caps">66BB6A</span> -40px, #<span class="caps">66BB6A</span> 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #<span class="caps">303F9F</span>;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In <span class="caps">CM2</span>, this used to be 0.4em, but in <span class="caps">CM3</span> it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In <span class="caps">CM3</span> this went to 4px from 0 in <span class="caps">CM2</span>. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #<span class="caps">BA2121</span>;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #<span class="caps">AA22FF</span>;
  font-weight: bold;
}
.highlight-meta {
  color: #<span class="caps">AA22FF</span>;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #<span class="caps">AA22FF</span>;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #<span class="caps">BA2121</span>;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #<span class="caps">AA22FF</span>;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but <span class="caps">FF</span> barfs all over that */
  height: 24em;
  /* <span class="caps">FF</span> needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/<span class="caps">FF</span> */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #<span class="caps">FF0000</span> } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #<span class="caps">BC7A00</span> } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #<span class="caps">FF0000</span> } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #<span class="caps">0044DD</span> } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #<span class="caps">BA2121</span> } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #<span class="caps">0000FF</span>; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #<span class="caps">AA22FF</span> } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #<span class="caps">D2413A</span>; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #<span class="caps">0000FF</span> } /* Name.Function */
.highlight .nl { color: #<span class="caps">A0A000</span> } /* Name.Label */
.highlight .nn { color: #<span class="caps">0000FF</span>; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #<span class="caps">AA22FF</span>; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #<span class="caps">BA2121</span> } /* Literal.String.Affix */
.highlight .sb { color: #<span class="caps">BA2121</span> } /* Literal.String.Backtick */
.highlight .sc { color: #<span class="caps">BA2121</span> } /* Literal.String.Char */
.highlight .dl { color: #<span class="caps">BA2121</span> } /* Literal.String.Delimiter */
.highlight .sd { color: #<span class="caps">BA2121</span>; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #<span class="caps">BA2121</span> } /* Literal.String.Double */
.highlight .se { color: #<span class="caps">BB6622</span>; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #<span class="caps">BA2121</span> } /* Literal.String.Heredoc */
.highlight .si { color: #<span class="caps">BB6688</span>; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #<span class="caps">BB6688</span> } /* Literal.String.Regex */
.highlight .s1 { color: #<span class="caps">BA2121</span> } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #<span class="caps">0000FF</span> } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #<span class="caps">3E424D</span>; }
.ansi-black-bg { background-color: #<span class="caps">3E424D</span>; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #<span class="caps">E75C58</span>; }
.ansi-red-bg { background-color: #<span class="caps">E75C58</span>; }
.ansi-red-intense-fg { color: #<span class="caps">B22B31</span>; }
.ansi-red-intense-bg { background-color: #<span class="caps">B22B31</span>; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #<span class="caps">DDB62B</span>; }
.ansi-yellow-bg { background-color: #<span class="caps">DDB62B</span>; }
.ansi-yellow-intense-fg { color: #<span class="caps">B27D12</span>; }
.ansi-yellow-intense-bg { background-color: #<span class="caps">B27D12</span>; }
.ansi-blue-fg { color: #<span class="caps">208FFB</span>; }
.ansi-blue-bg { background-color: #<span class="caps">208FFB</span>; }
.ansi-blue-intense-fg { color: #<span class="caps">0065CA</span>; }
.ansi-blue-intense-bg { background-color: #<span class="caps">0065CA</span>; }
.ansi-magenta-fg { color: #<span class="caps">D160C4</span>; }
.ansi-magenta-bg { background-color: #<span class="caps">D160C4</span>; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #<span class="caps">60C6C8</span>; }
.ansi-cyan-bg { background-color: #<span class="caps">60C6C8</span>; }
.ansi-cyan-intense-fg { color: #<span class="caps">258F8F</span>; }
.ansi-cyan-intense-bg { background-color: #<span class="caps">258F8F</span>; }
.ansi-white-fg { color: #<span class="caps">C5C1B4</span>; }
.ansi-white-bg { background-color: #<span class="caps">C5C1B4</span>; }
.ansi-white-intense-fg { color: #<span class="caps">A1A6B2</span>; }
.ansi-white-intense-bg { background-color: #<span class="caps">A1A6B2</span>; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">pylab</span> inline
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Populating the interactive namespace from numpy and matplotlib
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install-the-necessary-packages-and-the-model_plots-module">Install the necessary packages and the model_plots module<a class="anchor-link" href="#Install-the-necessary-packages-and-the-model_plots-module">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># basic packages</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># to download the Banking dataset from the website</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="c1"># to create predictive models</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="k">import</span> <span class="n">datasets</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">classification_report</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">confusion_matrix</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="k">import</span> <span class="n">LogisticRegression</span>
<span class="c1"># from xgboost import XGBClassifier</span>

<span class="c1"># make plots</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># model plots module</span>
<span class="c1"># 1. download from: https://github.com/pbmarcus/model_plots</span>
<span class="c1"># 2. unzip and move the model_plots.py file to your working directory</span>

<span class="kn">import</span> <span class="nn">model_plots</span> <span class="k">as</span> <span class="nn">mp</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-2-8b2d3491ee66&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-intense-fg ansi-bold">()</span>
<span class="ansi-green-fg">     16</span> <span class="ansi-green-intense-fg ansi-bold">from</span> sklearn<span class="ansi-yellow-intense-fg ansi-bold">.</span>ensemble <span class="ansi-green-intense-fg ansi-bold">import</span> RandomForestClassifier
<span class="ansi-green-fg">     17</span> <span class="ansi-green-intense-fg ansi-bold">from</span> sklearn<span class="ansi-yellow-intense-fg ansi-bold">.</span>linear_model <span class="ansi-green-intense-fg ansi-bold">import</span> LogisticRegression
<span class="ansi-green-intense-fg ansi-bold">---&gt; 18</span><span class="ansi-yellow-intense-fg ansi-bold"> </span><span class="ansi-green-intense-fg ansi-bold">from</span> xgboost <span class="ansi-green-intense-fg ansi-bold">import</span> XGBClassifier
<span class="ansi-green-fg">     19</span> 
<span class="ansi-green-fg">     20</span> <span class="ansi-red-intense-fg ansi-bold"># make plots</span>

<span class="ansi-red-intense-fg ansi-bold">ModuleNotFoundError</span>: No module named &#39;xgboost&#39;</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">version</span>
<span class="n">sys</span><span class="o">.</span><span class="n">version_info</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">platform</span>
<span class="n">platform</span><span class="o">.</span><span class="n">architecture</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Read-the-Iris-dataset-from-Sci-kit-Learn">Read the Iris dataset from Sci-kit Learn<a class="anchor-link" href="#Read-the-Iris-dataset-from-Sci-kit-Learn">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># iris dataset</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">target</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">feature_names</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>
<span class="n">iris</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">target_names</span><span class="p">)))</span>
<span class="c1"># rename column names</span>
<span class="n">iris</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sepal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;sepal_width&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="s1">&#39;petal_width&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;species&#39;</span><span class="p">]</span>
<span class="n">iris</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Create feature and target arrays</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">species</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;species&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Split into training and test set</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">random_state</span> <span class="o">=</span> <span class="mi">2018</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Build-3-simple-machine-learning-models-(Random-Forest,-Logistic-Regression-and-XG-Boost)">Build 3 simple machine learning models (Random Forest, Logistic Regression and <span class="caps">XG</span> Boost)<a class="anchor-link" href="#Build-3-simple-machine-learning-models-(Random-Forest,-Logistic-Regression-and-XG-Boost)">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Werkt het ook met multinomial logit?</span>
<span class="c1"># http://scikit-learn.org/stable/auto_examples/linear_model/plot_sparse_logistic_regression_mnist.html</span>
<span class="c1"># of http://dataaspirant.com/2017/05/15/implement-multinomial-logistic-regression-python/</span>

<span class="c1"># Instantiate a Random Forest classifier and fit the classifier to the training data</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Turn up tolerance for faster convergence</span>
<span class="n">clf_mult</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">multi_class</span> <span class="o">=</span> <span class="s1">&#39;multinomial&#39;</span><span class="p">,</span> <span class="n">solver</span> <span class="o">=</span> <span class="s1">&#39;newton-cg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Werkt het ook met een XGBoost?</span>
<span class="c1"># https://machinelearningmastery.com/develop-first-xgboost-model-python-scikit-learn/</span>
<span class="n">clf_xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">model_plots</span><span class="p">(</span><span class="n">feature_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">]</span>
                     <span class="p">,</span> <span class="n">label_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span><span class="p">]</span>
                     <span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Train data&#39;</span><span class="p">,</span> <span class="s1">&#39;Test data&#39;</span><span class="p">]</span>
                     <span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="p">[</span><span class="n">clf</span><span class="p">,</span> <span class="n">clf_mult</span><span class="p">]</span>
                     <span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rf&#39;</span><span class="p">,</span> <span class="s1">&#39;mult&#39;</span><span class="p">]</span>
                     <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">dataprep_modevalplots</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">input_modevalplots</span><span class="p">()</span><span class="c1">#.cumulative_lift_chart2()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mp</span><span class="o">.</span><span class="n">cumlift</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">scope_modevalplot</span><span class="p">(),</span> <span class="n">save</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mp</span><span class="o">.</span><span class="n">cumresponse</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">scope_modevalplot</span><span class="p">(</span><span class="n">select_dataset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Test data&#39;</span><span class="p">],</span> <span class="n">select_targetvalue</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;virginica&#39;</span><span class="p">],</span> <span class="n">select_model</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rf&#39;</span><span class="p">]),</span> <span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mp</span><span class="o">.</span><span class="n">gains</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">scope_modevalplot</span><span class="p">(</span><span class="n">eval_type</span><span class="o">=</span><span class="s1">&#39;CompareTargetValues&#39;</span><span class="p">,</span> <span class="n">select_targetvalue</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;virginica&#39;</span><span class="p">,</span> <span class="s1">&#39;setosa&#39;</span><span class="p">]))</span>
</pre></div>

</div>
</div>
</div>

</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>
  <div class="post">
    <h1 class="post-title">
      <a href="/modelplotr-to-help-explain-your-predictive-model.html" rel="bookmark" title="Permalink to âmodelplotr to help explain your predictiveÂ modelâ"><span class="dquo">&#8220;</span>modelplotr to help explain your predictive&nbsp;model&#8221;</a>
    </h1>
    <span class="post-date">juli 11, 2018</span>

    <h1>Why <span class="caps">ROC</span> curves <span class="amp">&amp;</span> Hit Rates are unfit to assess the business value of your&nbsp;model</h1>
<h2>4 visualisations to explain your predictive model to your fellow business colleagues who donât understand shit about&nbsp;data</h2>
<h3>Summary</h3>
<p>In this blog we explain four most valuable evaluation charts to assess the business value of a predictive model. Since these visualisations are not included in most popular model building packages or modules in R and Python, we show how you can easily create these plots for your own predictive models. This will help you to explain your model&#8217;s business value in laymans terms to&nbsp;non-techies. </p>
<h3>Intro</h3>
<blockquote>
<p>â&#8230;And as we can see clearly on this <span class="caps">ROC</span> plot, the sensitivity of the model at the value of 0.2 on one minus the specificity is quite high!&nbsp;Right?â¦â. </p>
</blockquote>
<p>If your fellow business colleague didnât already wander away during your presentation about your fantastic predictive model, they will definitely do so when you start talking like this. Why? Because the <span class="caps">ROC</span> curve is not easy to quickly explain and also difficult to translate into answers on business questions. While these business questions were the reason youâve built a model in the first&nbsp;place!   </p>
<p>What do we mean with business questions? In most use cases, we build a predictive model to select the best records to, say: your active customers with the highest probability to churn, prospects that are most likely to respond to an offer or transactions that have a high risk to be&nbsp;fraudulent. </p>
<p>In order to verify how our model building endeavours are doing, we evaluate how the model performs on a selection or subset of records in a test or external validation set. We look at model performance measures like the <span class="caps">ROC</span> curve or hit rate. Those plots and statistics are very helpful to check during model building and optimization whether your model is under- or overfitting and what set of parameters performs best on test data. However, these statistics are not that valuable in assessing the business value the model you&nbsp;developed. </p>
<p>This is not only because itâs quite hard to explain the interpretation of âarea under the curveâ, âspecificityâ or âsensitivityâ to business people. The main reason that these statistics and plots are useless in your business meetings is that they donât help in determining how to apply your predictive model: What percentage of records should we select based on the model? Should we select only the best 10% of cases? Or should we stop at 30%? Or go on until we have selected 70%?&#8230;  This is something you want to decide together with your business colleague, to best match the business plans and campaign targets they have in mind. The four plots we discuss next are in our view the best ones for that&nbsp;cause.</p>
<h3>Example: Predictive models from <em>mlr</em> on the <em>Bank Marketing Data&nbsp;Set</em></h3>
<p>When we introduce the plots, we&#8217;ll show you how to use them with some examples. These examples are based on a publicly available dataset, called the Bank Marketing Data Set. It is one of the most popular datasets which is made available on the <a href="https://archive.ics.uci.edu/ml/index.php"><span class="caps">UCI</span> Machine Learning Repository</a>. The data set comes from a Portugese bank and is about a frequently-posed marketing question: whether a customer did or did not acquire a term deposit, a financial product. There are 4 datasets available and the bank-additional-full.csv is the one we use. It contains the information of 41.188 customers and 21 columns of information. Since we want to show you how to build the plots, not how to build a perfect model, we&#8217;ll use six of these columns.  the Hereâs a short description on the data we&nbsp;use:</p>
<ol>
<li>y: has the client subscribed a term&nbsp;deposit?</li>
<li>duration: last contact duration, in seconds&nbsp;(numeric).</li>
<li>campaign: number of contacts performed during this campaign and for this&nbsp;client</li>
<li>pdays: number of days that passed by after the client was last contacted from a previous&nbsp;campaign</li>
<li>previous: number of contacts performed before this campaign and for this client&nbsp;(numeric)</li>
<li>euribor3m: euribor 3 month&nbsp;rate</li>
</ol>
<p>Let&#8217;s load the data and have a look at the&nbsp;summary:</p>
<div class="highlight"><pre><span></span><span class="c1"># download bank data, prepare and summarize</span>
zipname <span class="o">=</span> <span class="s">&#39;https://archive.ics.uci.edu/ml/machine-learning-databases/00222/bank-additional.zip&#39;</span>
csvname <span class="o">=</span> <span class="s">&#39;bank-additional/bank-additional.csv&#39;</span>
temp <span class="o">&lt;-</span> <span class="kp">tempfile</span><span class="p">()</span>
download.file<span class="p">(</span>zipname<span class="p">,</span>temp<span class="p">,</span> mode<span class="o">=</span><span class="s">&quot;wb&quot;</span><span class="p">)</span>
bank <span class="o">&lt;-</span> read.table<span class="p">(</span>unzip<span class="p">(</span>temp<span class="p">,</span>csvname<span class="p">),</span>sep<span class="o">=</span><span class="s">&quot;;&quot;</span><span class="p">,</span> stringsAsFactors<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span>header <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
<span class="kp">unlink</span><span class="p">(</span>temp<span class="p">)</span>
bank <span class="o">&lt;-</span> bank<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="s">&#39;duration&#39;</span><span class="p">,</span><span class="s">&#39;campaign&#39;</span><span class="p">,</span><span class="s">&#39;pdays&#39;</span><span class="p">,</span><span class="s">&#39;previous&#39;</span><span class="p">,</span><span class="s">&#39;euribor3m&#39;</span><span class="p">)]</span>

<span class="kp">summary</span><span class="p">(</span>bank<span class="p">)</span>
<span class="c1">##       y                duration         campaign          pdays      </span>
<span class="c1">##  Length:4119        Min.   :   0.0   Min.   : 1.000   Min.   :  0.0  </span>
<span class="c1">##  Class :character   1st Qu.: 103.0   1st Qu.: 1.000   1st Qu.:999.0  </span>
<span class="c1">##  Mode  :character   Median : 181.0   Median : 2.000   Median :999.0  </span>
<span class="c1">##                     Mean   : 256.8   Mean   : 2.537   Mean   :960.4  </span>
<span class="c1">##                     3rd Qu.: 317.0   3rd Qu.: 3.000   3rd Qu.:999.0  </span>
<span class="c1">##                     Max.   :3643.0   Max.   :35.000   Max.   :999.0  </span>
<span class="c1">##     previous        euribor3m    </span>
<span class="c1">##  Min.   :0.0000   Min.   :0.635  </span>
<span class="c1">##  1st Qu.:0.0000   1st Qu.:1.334  </span>
<span class="c1">##  Median :0.0000   Median :4.857  </span>
<span class="c1">##  Mean   :0.1903   Mean   :3.621  </span>
<span class="c1">##  3rd Qu.:0.0000   3rd Qu.:4.961  </span>
<span class="c1">##  Max.   :6.0000   Max.   :5.045</span>
</pre></div>


<p>On this data, we&#8217;ve applied some predictive modeling techniques from the <a href="https://mlr-org.github.io/mlr/"><strong>mlr package</strong></a>. This popular package is a wrapper for many predictive modeling techniques, such as logistic regression, random forest, <span class="caps">XG</span> boost, svm, neural nets and many, many others. For instance, to predict the binary target <strong>y</strong>, mlr currently offers the following&nbsp;algorithms:</p>
<div class="highlight"><pre><span></span><span class="c1"># To check available algorithms, create classification task with binary target y </span>
task <span class="o">=</span> mlr<span class="o">::</span>makeClassifTask<span class="p">(</span>data <span class="o">=</span> bank<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="c1">## Error in loadNamespace(name): there is no package called &#39;mlr&#39;</span>
algos <span class="o">=</span> mlr<span class="o">::</span>listLearners<span class="p">(</span>task<span class="p">,</span> check.packages <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span><span class="o">$</span>name
<span class="c1">## Error in loadNamespace(name): there is no package called &#39;mlr&#39;</span>
<span class="kp">paste0</span><span class="p">(</span><span class="s">&#39;Available Algorithms (&#39;</span><span class="p">,</span><span class="kp">length</span><span class="p">(</span>algos<span class="p">),</span><span class="s">&#39;): &#39;</span><span class="p">,</span><span class="kp">paste</span><span class="p">(</span>algos<span class="p">,</span>collapse <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="p">))</span>
<span class="c1">## Error in paste0(&quot;Available Algorithms (&quot;, length(algos), &quot;): &quot;, paste(algos, : object &#39;algos&#39; not found</span>
</pre></div>


<p>It should be noted, that to use the <strong>modelplotr</strong> package you don&#8217;t have to use mlr to build your models. More on this in the package documentation. To have a few models to evaluate with our plots, we do take full advantage of&nbsp;mlr.</p>
<div class="highlight"><pre><span></span><span class="c1"># prepare data for training and train models </span>
test_size <span class="o">=</span> <span class="m">0.3</span>
bank<span class="o">$</span>y <span class="o">=</span> <span class="kp">as.factor</span><span class="p">(</span>bank<span class="o">$</span>y<span class="p">)</span>
train_index <span class="o">=</span>  <span class="kp">sample</span><span class="p">(</span><span class="kp">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="kp">nrow</span><span class="p">(</span>bank<span class="p">)),</span>size <span class="o">=</span> <span class="p">(</span><span class="m">1</span> <span class="o">-</span> test_size<span class="p">)</span><span class="o">*</span><span class="kp">nrow</span><span class="p">(</span>bank<span class="p">)</span> <span class="p">,</span>replace <span class="o">=</span> <span class="bp">F</span> <span class="p">)</span>
train <span class="o">=</span> bank<span class="p">[</span>train_index<span class="p">,]</span>
test <span class="o">=</span> bank<span class="p">[</span><span class="o">-</span>train_index<span class="p">,]</span>

<span class="c1"># estimate models with mlr</span>
<span class="kn">library</span><span class="p">(</span>mlr<span class="p">)</span>
<span class="c1">## Error in library(mlr): there is no package called &#39;mlr&#39;</span>
<span class="c1">#models</span>
task <span class="o">=</span> makeClassifTask<span class="p">(</span>data <span class="o">=</span> train<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="c1">## Error in makeClassifTask(data = train, target = &quot;y&quot;): could not find function &quot;makeClassifTask&quot;</span>
lrn <span class="o">=</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.randomForest&quot;</span><span class="p">,</span> predict.type <span class="o">=</span> <span class="s">&quot;prob&quot;</span><span class="p">)</span>
<span class="c1">## Error in makeLearner(&quot;classif.randomForest&quot;, predict.type = &quot;prob&quot;): could not find function &quot;makeLearner&quot;</span>
rf <span class="o">=</span> train<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">)</span>
<span class="c1">## Error in train(lrn, task): could not find function &quot;train&quot;</span>
lrn <span class="o">=</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.multinom&quot;</span><span class="p">,</span> predict.type <span class="o">=</span> <span class="s">&quot;prob&quot;</span><span class="p">)</span>
<span class="c1">## Error in makeLearner(&quot;classif.multinom&quot;, predict.type = &quot;prob&quot;): could not find function &quot;makeLearner&quot;</span>
mnl <span class="o">=</span> train<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">)</span>
<span class="c1">## Error in train(lrn, task): could not find function &quot;train&quot;</span>
lrn <span class="o">=</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.xgboost&quot;</span><span class="p">,</span> predict.type <span class="o">=</span> <span class="s">&quot;prob&quot;</span><span class="p">)</span>
<span class="c1">## Error in makeLearner(&quot;classif.xgboost&quot;, predict.type = &quot;prob&quot;): could not find function &quot;makeLearner&quot;</span>
xgb <span class="o">=</span> train<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">)</span>
<span class="c1">## Error in train(lrn, task): could not find function &quot;train&quot;</span>
lrn <span class="o">=</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.lda&quot;</span><span class="p">,</span> predict.type <span class="o">=</span> <span class="s">&quot;prob&quot;</span><span class="p">)</span>
<span class="c1">## Error in makeLearner(&quot;classif.lda&quot;, predict.type = &quot;prob&quot;): could not find function &quot;makeLearner&quot;</span>
lda <span class="o">=</span> train<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">)</span>
<span class="c1">## Error in train(lrn, task): could not find function &quot;train&quot;</span>
</pre></div>


<p>Ok, we&#8217;ve generated some predictive models. Let&#8217;s prepare for&nbsp;plotting!</p>
<div class="highlight"><pre><span></span><span class="c1"># apply modelplotr</span>
<span class="kn">library</span><span class="p">(</span>modelplotr<span class="p">)</span>
<span class="c1">## Error in library(modelplotr): there is no package called &#39;modelplotr&#39;</span>
dataprep_modevalplots<span class="p">(</span>datasets<span class="o">=</span><span class="kt">list</span><span class="p">(</span><span class="s">&quot;train&quot;</span><span class="p">,</span><span class="s">&quot;test&quot;</span><span class="p">),</span>
  datasetlabels <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="s">&quot;train data&quot;</span><span class="p">,</span><span class="s">&quot;test data&quot;</span><span class="p">),</span>
  models <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="s">&quot;rf&quot;</span><span class="p">,</span><span class="s">&quot;mnl&quot;</span><span class="p">,</span><span class="s">&quot;xgb&quot;</span><span class="p">,</span><span class="s">&quot;lda&quot;</span><span class="p">),</span>
  modellabels <span class="o">=</span> <span class="kt">list</span><span class="p">(</span><span class="s">&quot;random forest&quot;</span><span class="p">,</span><span class="s">&quot;multinomial logit&quot;</span><span class="p">,</span><span class="s">&quot;XGBoost&quot;</span><span class="p">,</span><span class="s">&quot;Discriminant&quot;</span><span class="p">),</span>
  targetname<span class="o">=</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="c1">## Error in dataprep_modevalplots(datasets = list(&quot;train&quot;, &quot;test&quot;), datasetlabels = list(&quot;train data&quot;, : could not find function &quot;dataprep_modevalplots&quot;</span>
<span class="kp">head</span><span class="p">(</span>eval_tot<span class="p">)</span>
<span class="c1">## Error in head(eval_tot): object &#39;eval_tot&#39; not found</span>
input_modevalplots<span class="p">()</span>
<span class="c1">## Error in input_modevalplots(): could not find function &quot;input_modevalplots&quot;</span>
scope_modevalplots<span class="p">()</span>
<span class="c1">## Error in scope_modevalplots(): could not find function &quot;scope_modevalplots&quot;</span>
</pre></div>


<p>As the output notes, you can use modelplotr to evaluate your model(s) from several&nbsp;perspectives: </p>
<ul>
<li>Interpret just one model (the&nbsp;default)</li>
<li>Compare the model performance across different&nbsp;datasets</li>
<li>Compare the performance across different&nbsp;models</li>
<li>Compare the performance across different target&nbsp;values</li>
</ul>
<p>Here, we will keep it simple and evaluate - from a business perspective - how well a selected model will perform in a selected dataset for one target value. The defaults or selected model, dataset and target value are printed&nbsp;above.</p>
<h3>Letâs introduce the Gains, Lift and (cumulative) Response&nbsp;Charts.</h3>
<p>Letâs get you familiar with the plots we so strongly advocate to use to assess a predictive modelâs business value. Although each plot tells story with a different perspective, they all use the same data. To be more specific, they&nbsp;share: </p>
<ul>
<li>Predicted probability for the target&nbsp;class, </li>
<li>Equally sized groups based on this predicted&nbsp;probability. </li>
<li>Actual number of observed target class cases in these&nbsp;groups.  </li>
</ul>
<p>Itâs up to you how many equally sized groups you want to use. Itâs common practice to split the data to score into 10 equally large groups and call our groups deciles. Those observations in the scored set that belong to the top-10% with highest model probability, are in decile 1; the next group of 10% with high model probability are decile 2 and finally the 10% observations with the lowest model probability on the target class belong to decile 10. If you want to use a more refined grouping, say 100 groups and they are called percentiles or 5 groups splitting them into&nbsp;quintiles.</p>
<p>Each chart plots the deciles on the x axis and another measure on the y axis. The deciles are plotted from left to right so the observations with the highest model probability are on the left side of the plot. This results in plots like&nbsp;this:</p>
<p><img alt="''" src="/img/decileplot.png" /> </p>
<p>Now that itâs clear what is on the horizontal axis of each of the plots, we can go into more detail on the metrics per plot on the vertical axis. Per plot, weâll start with a brief explanation what insight you gain with the plot from a business perspective. After that, we can go into more detail on the plotted&nbsp;lines.</p>
<h4>The cumulative gains&nbsp;chart</h4>
<p>The cumulative gains chart - often named âgains chartâ - helps you answer the&nbsp;question:</p>
<p><strong><em><span style="color:orange">When we apply the model and select the best X deciles, what % of the actual target class observations can we expect to&nbsp;target?</span></em></strong> </p>
<p>Hence, the cumulative gains chart visualises the percentage of the target class members you have selected if you would decide to select up until decile&nbsp;X. </p>
<p>In most cases, you want to use a predictive model to target a subset of observations - customers, prospects, cases,&#8230; - instead of targeting all cases. Which ones to pick? Thatâs why youâve built a model. This means that you will miss out on some of the true positives in your&nbsp;selection. </p>
<p>Consequently, it also provides insights in the percentage youâll miss when applying the model. Yes, you will miss some potential, because if you are not willing to accept that, you should not use a model in the first place. Or build a perfect model, that scores all actual target class members with a 100% probability and all the cases that do not belong to the target class with a 0% probability. However, if youâre such a wizard, you donât need these plots any way or you should reconsider the features youâve used in your model - maybe youâre&nbsp;cheating?&#8230;.  </p>
<p>What part of the actual target class members you did pick, thatâs what the cumulative gains chart tells you. The plot comes with two references to tell you how good/bad your model is: The random model line and the wizard model line. The random model line tells you what proportion of the actual target class you would expect to select when no model is used at all. This vertical line runs from the origin (with 0% of cases, you can only have 0% of the actual target class members) to the upper right corner (with 100% of the cases, you have 100% of the target class members). Itâs the rock bottom of how your model can perform; are you close to this, then your model is not much better than a flip of a coin. The wizard model is the upper bound of what your model can do. It starts in the origin and rises as steep as possible towards 100%. If less than 10% of all cases belong to the target category, this means that it goes from the origin to the value of decile 1 and cumulative gains of 100%, for all other deciles the cumulative gains remains at 100% as it is a cumulative measure. Your model will always move between these two reference lines and looks like&nbsp;this: </p>
<p><img alt="''" src="/img/cumgainsplot.png" /></p>
<p>To generate the cumulate gains plot, we can simply call the function <strong>cumgains()</strong>:</p>
<div class="highlight"><pre><span></span>cumgains<span class="p">()</span>
<span class="c1">## Error in cumgains(): could not find function &quot;cumgains&quot;</span>
</pre></div>


<h4>The cumulative lift&nbsp;chart</h4>
<p>The cumulative lift chart, often referred to as lift chart or index chart, helps you answer the&nbsp;question:</p>
<p><strong><em><span style="color:orange">When we apply the model and select the best X deciles, how many times better is that than using no model at&nbsp;all?</span></em></strong></p>
<p>The lift chart helps you in explaining how much better selecting based on you model is compared to taking random selections instead. Especially when models are not yet used within a certain organisation or domain, this really helps business understand what selecting based on models can do for&nbsp;them. </p>
<p>The lift chart only has one reference line: the ârandom modelâ.  With a random model we mean that each observation gets a random number and all cases are devided into deciles based on these random numbers. The % of actual target category observations in each decile would be equal to the overall % of actual target category observations in the total set. Since the lift is calculated as the ratio of these two numbers, we het a flatliner at the value of 1. Your model should however be able to do better, resulting in a high ratio for decile 1. In the end, since the plot is cumulative, with 100% of cases, we have the whole set again and therefore the cumulative lift will always end up at a value of 1. It looks like&nbsp;this:</p>
<p><img alt="''" src="/img/cumliftplot.png" /></p>
<p>To generate the cumulate lift plot, we can simply call the function <strong>lift()</strong>:</p>
<div class="highlight"><pre><span></span>lift<span class="p">()</span>
<span class="c1">## Error in lift(): could not find function &quot;lift&quot;</span>
</pre></div>


<h4>The response&nbsp;plot</h4>
<p>One of the easiest to explain evaluation plots is the response plot. It simply plots the percentage of target class observations per decile. It can be used to answer the following business&nbsp;question:</p>
<p><strong><em><span style="color:orange">When we apply the model and select decile X, what is the expected % of target class observations in that&nbsp;decile?</span></em></strong> </p>
<p>The plot has one reference line: The % of target class cases in the total set. It looks like&nbsp;this:</p>
<p><img alt="''" src="/img/responseplot.png" /></p>
<p>A good model starts high in decile 1 and drops quickly towards 0. How steep the decline can be, also depends on the % of target class in the total set. Interesting is the location where your modelâs line intersects the random model line. From here, the % of target class cases is lower than a random selection of cases would&nbsp;hold.  </p>
<p>To generate the response plot, we can simply call the function <strong>response()</strong>:</p>
<div class="highlight"><pre><span></span>response<span class="p">()</span>
<span class="c1">## Error in response(): could not find function &quot;response&quot;</span>
</pre></div>


<h4>The cumulative response&nbsp;plot</h4>
<p>And finally, one of the most used charts: The cumulative response chart. It answers the question burning on each business reps&nbsp;lips:</p>
<p><strong><em><span style="color:orange">When we apply the model and select up until decile X, what is the expected % of target class observations in the&nbsp;selection?</span></em></strong></p>
<p>The reference line in this plot is the same as in the response chart: the % of target class cases in the total&nbsp;set. </p>
<p><img alt="''" src="/img/cumresponseplot.png" /></p>
<p>Whereas the response plot crosses the reference line, in the cumulative response plot it approaches it to end at the same point: Selecting all cases up until decile 10 is the same as selecting all cases, hence the % of target class cases will be exactly the&nbsp;same.</p>
<p>This plot most often used to decide - together with the business - up until what decile to select based upon the&nbsp;model. </p>
<p>To generate the cumulative response plot, we can simply call the function <strong>cumresponse()</strong>:</p>
<div class="highlight"><pre><span></span>cumresponse<span class="p">()</span>
<span class="c1">## Error in cumresponse(): could not find function &quot;cumresponse&quot;</span>
</pre></div>
  </div>
</div>
<!--// updated -->
<div class="pagination">
        <span class="pagination-item newer">newer</span>
        <span class="pagination-item older">older</span>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>
     </div>
  </body>
</html>